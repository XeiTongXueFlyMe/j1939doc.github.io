<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>J1939Socket: J1939Socket API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">J1939Socket
   &#160;<span id="projectnumber">Version 2.1.0</span>
   </div>
   <div id="projectbrief">åŸºäºSAE J1939åè®®ï¼Œå¼€æºå¯ç§»æ¤çš„J1939é©±åŠ¨ï¼Œæœ¬è¯´æ˜ä¹¦çœ‹é½æœ€æ–°æºä»£ç ï¼Œå¦‚é‡æ¥å£æè¿°ä¸åŒè¯·æ›´æ–°æºä»£ç (github)ã€‚</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- åˆ¶ä½œè€… Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'æœç´¢');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','æœç´¢');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('labelid1.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">J1939Socket API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
API å‡½æ•°æ¦‚è¦è¡¨</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">å‡½æ•°å  </th><th class="markdownTableHeadCenter">å‡   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_ab49a630de94d8e03e275e3691626d89e.html#ab49a630de94d8e03e275e3691626d89e">J1939_Initialization()</a>  </td><td class="markdownTableBodyCenter">åˆå§‹åŒ–J1939åè®®æ ˆ   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>  </td><td class="markdownTableBodyCenter">å¿ƒè·³å‡½æ•°ï¼Œå®šæ—¶è¢«è°ƒç”¨ï¼Œå®ŒæˆJ1939åè®®æ ˆçš„æ‰€æœ‰è¿è¡Œé€»è¾‘   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_abf1da75af4a339cf813e76205b281480.html#abf1da75af4a339cf813e76205b281480">J1939_Read_Message()</a>  </td><td class="markdownTableBodyCenter">è¯»å–å•å¸§æ¶ˆæ¯ï¼Œæœ‰æ¶ˆæ¯ï¼Œè¿”å› RC_SUCCESS ï¼ˆéé˜»å¡I/0æ¥å£ï¼‰   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message()</a>  </td><td class="markdownTableBodyCenter">å‘é€å•å¸§æ¶ˆæ¯ï¼Œå‘é€æˆåŠŸï¼Œè¿”å› RC_SUCCESSï¼ˆéé˜»å¡I/0æ¥å£ï¼‰   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_a485a992689e86ad9b86c49378c12c673.html#a485a992689e86ad9b86c49378c12c673" title="è¿™æ˜¯ä¸€ä¸ªéé˜»å¡ioæ¥å£ ">J1939_TP_TX_Message()</a>  </td><td class="markdownTableBodyCenter">å‘é€å­—èŠ‚æ•°å¤§äº8å­—èŠ‚çš„æ•°æ®ï¼Œåˆç§°ï¼ˆå¤šç»„ï¼Œå¤šå¸§ï¼Œé•¿å¸§ï¼‰çš„TPå‘é€ï¼Œå‘é€æˆåŠŸï¼Œè¿”å› RC_SUCCESSï¼ˆéé˜»å¡I/0æ¥å£ï¼‰   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_ad6f901a3489250837544956c6460ae15.html#ad6f901a3489250837544956c6460ae15">J1939_TP_RX_Message()</a>  </td><td class="markdownTableBodyCenter">è¯»å– ï¼ˆå¤šç»„ï¼Œå¤šå¸§ï¼Œé•¿å¸§ï¼‰çš„æ•°æ®ï¼Œæœ‰æ¶ˆæ¯ï¼Œè¿”å› RC_SUCCESS ï¼ˆéé˜»å¡I/0æ¥å£ï¼‰   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_ade5a2ccfd9902b6d68f7970ab7dab849.html#ade5a2ccfd9902b6d68f7970ab7dab849">J1939_Request_PGN()</a>  </td><td class="markdownTableBodyCenter">å‘æ€»çº¿è¯·æ±‚è·å–ä¸€ä¸ªPGNï¼Œå¦‚æœPGNè¢«å…¶ä»–ECUæ”¯æŒï¼Œå°†æœ‰ç›¸åº”çš„å“åº”å’ŒPGNæ¶ˆæ¯è¢«å‘åˆ°æ€»çº¿ä¸Š   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><a class="el" href="_j1939_8h_a70a740723a7139eef9dbc3f73c327cd2.html#a70a740723a7139eef9dbc3f73c327cd2">J1939_Create_Response()</a>  </td><td class="markdownTableBodyCenter">åˆ›å»ºä¸€ä¸ªPGNå“åº”ï¼Œå¦‚æœæ”¶åˆ°ä¸€ä¸ªPGNè¯·æ±‚ï¼Œåˆ™å‘é€ç›¸åº”çš„å“åº”å’ŒPGNã€‚åœ¨æ€»çº¿ä¸Š   </td></tr>
</table>
<hr/>
<h1><a class="anchor" id="autotoc_md2"></a>
J1939_Initialization()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–ç›¸å…³çš„CANç¡¬ä»¶</li>
<li>æ­¤å‡½æ•°å…¨å±€åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡</li>
<li>æ­¤å‡½æ•°é»˜è®¤åˆå§‹åŒ–4è·¯CANç¡¬ä»¶ï¼Œå¦‚æœä½ çš„èŠ¯ç‰‡åªæ”¯æŒ2è·¯æˆ–æ›´å°‘ï¼Œåªéœ€ç§»æ¤ä¸€è·¯æˆ–å¤šè·¯ï¼ˆåè®®ä¼šè‡ªé€‚åº”ï¼‰ï¼Œæœ¬å‡½æ•°åˆå§‹åŒ–4è·¯çš„å…¨å±€å˜é‡ä¸ä¼šå½±å“åè®®æ ˆçš„æ­£ç¡®ä½¿ç”¨ã€‚ </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³ä½¿ç”¨ demo </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="comment">//åˆå§‹åŒ–cané©±åŠ¨</span></div><div class="line">    init_can();</div><div class="line">    <span class="comment">//åˆå§‹åŒ–J1939åè®®æ ˆ</span></div><div class="line">    <a class="code" href="_j1939_8h_ab49a630de94d8e03e275e3691626d89e.html#ab49a630de94d8e03e275e3691626d89e">J1939_Initialization</a>( );</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(1)</div><div class="line">    {</div><div class="line">         ;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><hr/>
<h1><a class="anchor" id="autotoc_md4"></a>
J1939_Poll()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆ</li>
<li>æ­¤å‡½æ•°éœ€è¦ä¸æ–­è¢«è°ƒç”¨ï¼Œæœ€å¥½å®šæ—¶è°ƒç”¨ï¼ˆJ1939åè®®æ ˆä¸­æ–­æ¨¡å¼é™¤å¤–ï¼‰</li>
<li>æ­¤å‡½æ•°å…¨å±€åªèƒ½è¢«ä¸²è¡Œè°ƒç”¨ï¼Œä¸è®ºæ˜¯å•ç‰‡æœºå‰åè®¾è®¡æ¨¡å¼ï¼Œè¿˜æ˜¯åµŒå…¥å¼æ“ä½œç³»ç»Ÿè®¾è®¡æ¨¡å¼ã€‚ï¼ˆä¸²è¡Œè°ƒç”¨æ˜¯æŒ‡ï¼Œä¸èƒ½åœ¨J1939_Poll ä»£ç æ®µä¸­äº§ç”Ÿæœ¬J1939_Pollä»£ç æ®µç¨‹åºåµŒå¥—ï¼‰ï¼Œå»ºè®®å…¨å±€è®¾è®¡ä¸€ä¸ªj1939_poll()å‡½æ•°è°ƒç”¨å…¥å£ã€‚</li>
<li>æ­¤å‡½æ•°é»˜è®¤å¤„ç†4è·¯CANç¡¬ä»¶ï¼Œå¦‚æœä½ çš„èŠ¯ç‰‡åªæ”¯æŒ2è·¯æˆ–æ›´å°‘ï¼Œåªéœ€ç§»æ¤ä¸€è·¯æˆ–å¤šè·¯ï¼ˆåè®®ä¼šè‡ªé€‚åº”ï¼‰ã€‚</li>
<li>å»ºè®®åœ¨ä¸€ä¸ªå®šæ—¶å™¨ä¸­ï¼Œå®šæ—¶è°ƒç”¨ï¼ˆ10msï¼‰ï¼Œæˆ–åˆ™åœ¨ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¸­10MSä¸€æ¬¡åˆ·æ–° </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>åµŒå…¥å¼æ“ä½œç³»ç»Ÿä¸­æœ€ä½³ä½¿ç”¨ demo </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="comment">//è¿™ä¸ªdemoä¸­J1939_Initialization()ï¼Œå’ŒJ1939_Poll()ã€‚</span></div><div class="line"><span class="comment">//åœ¨å…¨å±€ä¸­ï¼Œåªæœ‰è¿™é‡Œè¢«è°ƒç”¨ã€‚CANç¡¬ä»¶åˆå§‹åŒ–åœ¨åµŒå…¥å¼æ“ä½œç³»ç»Ÿåˆå§‹åŒ–ä¹‹å‰</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> thread_j1939 (<span class="keywordtype">void</span> <span class="keyword">const</span> *argument)</div><div class="line">{</div><div class="line">    <a class="code" href="_j1939_8h_ab49a630de94d8e03e275e3691626d89e.html#ab49a630de94d8e03e275e3691626d89e">J1939_Initialization</a>();</div><div class="line">    <span class="comment">// ç­‰å¾…åœ°å€å£°æ˜è¶…æ—¶</span></div><div class="line"></div><div class="line">    <span class="keywordflow">while</span>(1)</div><div class="line">    {</div><div class="line">        <span class="comment">//ç³»ç»Ÿç­‰å¾…10MSçš„ä¿¡å·é‡0x01,æ¢å¥è¯è¯´ï¼Œå¦‚æœCANç¡¬ä»¶æ²¡æœ‰æ¥æ”¶åˆ°æ¶ˆæ¯ï¼ŒJ1939_Poll()ï¼Œ10msè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœCANç¡¬ä»¶æ”¶åˆ°æ¶ˆæ¯ï¼Œå°†ç«‹å³è¢«è°ƒç”¨</span></div><div class="line">        osSignalWait(0x01,10);</div><div class="line">        <a class="code" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll</a>();</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//CANç¡¬ä»¶çš„æ¥å—ä¸­æ–­</span></div><div class="line"><span class="comment">//è¿™é‡Œæˆ‘å¯ç”¨4è·¯CANç¡¬ä»¶ï¼Œæˆ‘å°†4è·¯CANç¡¬ä»¶çš„æ¥å—ä¸­æ–­éƒ½æŒ‡å‘äº†ISR_CAN_NODEï¼ˆï¼‰å‡½æ•°ã€‚</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ISR_CAN_NODE( )</div><div class="line">{</div><div class="line">    osSignalSet(thread_j1939_ID,0x01);</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>å‰åå°ç³»ç»Ÿä¸­æœ€ä½³ä½¿ç”¨ demo ï¼ˆå•æ¿è®¾è®¡æ¨¡å¼ï¼Œæ²¡æœ‰æ“ä½œç³»ç»Ÿï¼Œåªæœ‰mainï¼ˆï¼‰å’Œ ä¸­æ–­å‡½æ•°ï¼‰ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="comment">//è¿™ä¸ªdemoä¸­J1939_Initialization( )ï¼Œ</span></div><div class="line"><span class="comment">//åœ¨å…¨å±€ä¸­ï¼Œåªæœ‰è¿™é‡Œè¢«è°ƒç”¨ã€‚</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="comment">//åˆå§‹åŒ–cané©±åŠ¨ï¼Œå®šæ—¶å™¨åˆå§‹åŒ–</span></div><div class="line">    init_can();</div><div class="line">    timerInit(10);</div><div class="line">    <span class="comment">//åˆå§‹åŒ–J1939åè®®æ ˆ</span></div><div class="line">    <a class="code" href="_j1939_8h_ab49a630de94d8e03e275e3691626d89e.html#ab49a630de94d8e03e275e3691626d89e">J1939_Initialization</a>();</div><div class="line"></div><div class="line">    <span class="comment">//åœ¨è¿™é‡Œå¯åŠ¨å®šæ—¶å™¨</span></div><div class="line">    timerStart();</div><div class="line">    <span class="keywordflow">while</span>(1)</div><div class="line">    {</div><div class="line">        ;<span class="comment">//ä½ çš„ä»£ç ,è¿™é‡Œå¯ä»¥è°ƒç”¨å…¶ä»–çš„APIã€‚</span></div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ 10MS </span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> timer_j1939()</div><div class="line">{</div><div class="line">      <a class="code" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll</a>();</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>è£¸æ¿ä½¿ç”¨ demo ï¼ˆæœ€ç®€å•çš„æ¨¡å¼ï¼‰ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="comment">//è¿™ä¸ªdemoä¸­J1939_Initialization( )ï¼Œ</span></div><div class="line"><span class="comment">//åœ¨å…¨å±€ä¸­ï¼Œåªæœ‰è¿™é‡Œè¢«è°ƒç”¨ã€‚</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main()</div><div class="line">{</div><div class="line">    <span class="comment">//åˆå§‹åŒ–cané©±åŠ¨ï¼Œå®šæ—¶å™¨åˆå§‹åŒ–</span></div><div class="line">    init_can();</div><div class="line">    <span class="comment">//åˆå§‹åŒ–J1939åè®®æ ˆ</span></div><div class="line">    <a class="code" href="_j1939_8h_ab49a630de94d8e03e275e3691626d89e.html#ab49a630de94d8e03e275e3691626d89e">J1939_Initialization</a>( );</div><div class="line">    <span class="keywordflow">while</span>(1)</div><div class="line">    {</div><div class="line">        <a class="code" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll</a>();</div><div class="line">        delay_10ms();</div><div class="line">        ;<span class="comment">//ä½ çš„ä»£ç ï¼Œå¯ä»¥è°ƒç”¨J1939å…¶ä»–çš„API</span></div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> delay_10ms(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i,j,k;</div><div class="line">    <span class="keywordflow">for</span>(i=5;i&gt;0;i--)</div><div class="line">        <span class="keywordflow">for</span>(j=4;j&gt;0;j--)</div><div class="line">            <span class="keywordflow">for</span>(k=248;k&gt;0;k--);</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><hr/>
<h1><a class="anchor" id="autotoc_md6"></a>
J1939_Send_Message()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£ J1939çš„IDç»„æˆç»“æ„ï¼Œå’Œ J1939_MESSAGE ç»“æ„ä½“ </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> sendMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg;</div><div class="line">    <span class="comment">/*****å‘é€æ•°æ®(å‚è€ƒJ1939çš„IDç»„æˆå¡«å……ä¸‹é¢)***/</span></div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a6b25f85b55c0d06ad98b8d472ba85937">DataPage</a> = 0;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aed045d88b5b0a4a8dc72486d612a772c">Priority</a> = J1939_CONTROL_PRIORITY;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.DestinationAddress = 0x0f;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a311918f94c3980a2f7d011b93cc3c223">DataLength</a> = 8;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aa880f27ed7c7789066020f8fab6f94cd">PDUFormat</a> = 0xfe;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[0] = 1;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[1] = 2;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[2] = 3;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[3] = 4;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[4] = 5;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[5] = 6;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[6] = 7;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[7] = 8;</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>) != RC_SUCCESS);</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>ä¸€æ¬¡æ€§è°ƒç”¨å‡ è·¯CANç¡¬ä»¶å‘é€æ•°æ® </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> sendMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg;</div><div class="line">    <span class="comment">/*****å‘é€æ•°æ®(å‚è€ƒJ1939çš„IDç»„æˆå¡«å……ä¸‹é¢)***/</span></div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a6b25f85b55c0d06ad98b8d472ba85937">DataPage</a> = 0;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aed045d88b5b0a4a8dc72486d612a772c">Priority</a> = J1939_CONTROL_PRIORITY;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.DestinationAddress = 0x0f;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a311918f94c3980a2f7d011b93cc3c223">DataLength</a> = 8;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aa880f27ed7c7789066020f8fab6f94cd">PDUFormat</a> = 0xfe;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[0] = 1;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[1] = 2;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[2] = 3;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[3] = 4;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[4] = 5;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[5] = 6;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[6] = 7;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[7] = 8;</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>) != RC_SUCCESS);</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>) != RC_SUCCESS);</div><div class="line">    <span class="keywordflow">while</span> (<a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67bae729ea20e94e2498de857037f6aadbf9">Select_CAN_NODE_3</a>) != RC_SUCCESS);</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>è°ƒç”¨æ–¹å¼1 </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> sendMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg;</div><div class="line">    <span class="comment">/*****å‘é€æ•°æ®(å‚è€ƒJ1939çš„IDç»„æˆå¡«å……ä¸‹é¢)***/</span></div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a6b25f85b55c0d06ad98b8d472ba85937">DataPage</a> = 0;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aed045d88b5b0a4a8dc72486d612a772c">Priority</a> = J1939_CONTROL_PRIORITY;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.DestinationAddress = 0x0f;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a311918f94c3980a2f7d011b93cc3c223">DataLength</a> = 8;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aa880f27ed7c7789066020f8fab6f94cd">PDUFormat</a> = 0xfe;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[0] = 1;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[1] = 2;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[2] = 3;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[3] = 4;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[4] = 5;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[5] = 6;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[6] = 7;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[7] = 8;</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>) == RC_CANNOTTRANSMIT)</div><div class="line">    {</div><div class="line">        ;<span class="comment">//ç³»ç»Ÿç›®å‰ä¸èƒ½å‘é€æ¶ˆæ¯å¯èƒ½æ˜¯ J1939_Initializationï¼ˆï¼‰åœ°å€ç«äº‰ä¸æˆåŠŸ</span></div><div class="line">         <span class="comment">//åšå‡ºç›¸åº”çš„å¤„ç†ï¼Œä¸€èˆ¬J1939_EnqueueMessageä¸ä¼šè¿”å›RC_CANNOTTRANSMIT </span></div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>è°ƒç”¨æ–¹å¼2 </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> sendMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg;</div><div class="line">    <span class="comment">/*****å‘é€æ•°æ®(å‚è€ƒJ1939çš„IDç»„æˆå¡«å……ä¸‹é¢)***/</span></div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a6b25f85b55c0d06ad98b8d472ba85937">DataPage</a> = 0;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aed045d88b5b0a4a8dc72486d612a772c">Priority</a> = J1939_CONTROL_PRIORITY;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.DestinationAddress = 0x0f;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a311918f94c3980a2f7d011b93cc3c223">DataLength</a> = 8;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#aa880f27ed7c7789066020f8fab6f94cd">PDUFormat</a> = 0xfe;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[0] = 1;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[1] = 2;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[2] = 3;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[3] = 4;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[4] = 5;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[5] = 6;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[6] = 7;</div><div class="line">    _msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.<a class="code" href="struct_j1939___m_e_s_s_a_g_e___u_n_i_o_n_1_1j1939___p_i_d.html#a1da55828924eebb623e9f8eefb0715f7">Data</a>[7] = 8;</div><div class="line">    <a class="code" href="_j1939_8h_a226371f1c2c24ccc6c2ce13f0fbb2412.html#a226371f1c2c24ccc6c2ce13f0fbb2412">J1939_Send_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>);</div><div class="line">}</div></div><!-- fragment --><hr/>
<h1><a class="anchor" id="autotoc_md8"></a>
J1939_Read_Message()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£ J1939çš„IDç»„æˆç»“æ„ï¼Œå’Œ J1939_MESSAGE ç»“æ„ä½“ </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> readMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_j1939_8h_abf1da75af4a339cf813e76205b281480.html#abf1da75af4a339cf813e76205b281480">J1939_Read_Message</a>( &amp;_msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>) == RC_SUCCESS) </div><div class="line">    {</div><div class="line">        <span class="comment">/***********å¤„ç†æ¥å—æ•°æ®*************/</span></div><div class="line">        ;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>ä¸€æ¬¡æ€§å¤„ç†å‡ è·¯CANç¡¬ä»¶ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> readMsg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html">J1939_MESSAGE</a> _msg[2];</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_j1939_8h_abf1da75af4a339cf813e76205b281480.html#abf1da75af4a339cf813e76205b281480">J1939_Read_Message</a>( _msg, <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>) == RC_SUCCESS) </div><div class="line">    {</div><div class="line">        <span class="comment">/***********å¤„ç†æ¥å—PUD1æ ¼å¼æ•°æ®*************/</span></div><div class="line">        <span class="keywordflow">if</span>(_msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.PGN == 0x000100)</div><div class="line">        {</div><div class="line">            ;<span class="comment">//ä½ çš„ä»£ç </span></div><div class="line">        }</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">if</span>(<a class="code" href="_j1939_8h_abf1da75af4a339cf813e76205b281480.html#abf1da75af4a339cf813e76205b281480">J1939_Read_Message</a>( (_msg+1), <a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>) == RC_SUCCESS) </div><div class="line">    {</div><div class="line">        <span class="comment">/***********å¤„ç†æ¥å—PDU2æ ¼å¼æ•°æ®*************/</span></div><div class="line">        <span class="keywordflow">if</span>(_msg.<a class="code" href="union_j1939___m_e_s_s_a_g_e___u_n_i_o_n.html#a19ca4a91edcc8b6fa4a8fac99a4a3399">Mxe</a>.PGN == 0x00F101)</div><div class="line">        {</div><div class="line">            ;<span class="comment">//ä½ çš„ä»£ç </span></div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> <hr/>
<h1><a class="anchor" id="autotoc_md10"></a>
J1939_TP_TX_Message()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£ <a class="el" href="_j1939_8h_a485a992689e86ad9b86c49378c12c673.html#a485a992689e86ad9b86c49378c12c673" title="è¿™æ˜¯ä¸€ä¸ªéé˜»å¡ioæ¥å£ ">J1939_TP_TX_Message()</a>å‡½æ•°å…·ä½“çš„ä»£å…¥å‚æ•° </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TP_TX_Msg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="_j1939_8h.html#a9e9f4a9bd6c4a189e06fa67d441d65f7">j1939_int8_t</a> _data[100] = {1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7};</div><div class="line">    <span class="keywordflow">while</span>(RC_SUCCESS != <a class="code" href="_j1939_8h_a485a992689e86ad9b86c49378c12c673.html#a485a992689e86ad9b86c49378c12c673">J1939_TP_TX_Message</a>(65259,0XF1,(<a class="code" href="_j1939_8h.html#a9e9f4a9bd6c4a189e06fa67d441d65f7">j1939_int8_t</a>*)_data,<span class="keyword">sizeof</span>(_data),<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>));</div><div class="line">}</div></div><!-- fragment --> <hr/>
<h1><a class="anchor" id="autotoc_md12"></a>
J1939_TP_RX_Message()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£ <a class="el" href="_j1939_8h_ad6f901a3489250837544956c6460ae15.html#ad6f901a3489250837544956c6460ae15">J1939_TP_RX_Message()</a>å‡½æ•°å…·ä½“çš„ä»£å…¥å‚æ•° </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼</li>
<li>_dataæ•°ç»„çš„å¤§å°ä¸€å®šè¦å¤§äºç­‰äºå‘é€æ–¹é•¿å¸§çš„æ•°æ®å¤§å°ï¼Œå¦åˆ™è¯»å–å¤±è´¥ï¼ŒJ1939_TP_RX_Messageè¿”å›RC_CANNOTRECEIVE </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TP_RX_Msg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <a class="code" href="_j1939_8h.html#abed4986035b5138ce5c8306d2653fe01">j1939_uint8_t</a> _data[255];</div><div class="line">    <a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html">TP_RX_MESSAGE</a> _tp_msg;</div><div class="line"></div><div class="line">    _tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#abe235e92fcf5e3ffba5a2f990508609d">data</a> = _data;</div><div class="line">    _tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#aaa2893f791e31950d596ccda54abf6ec">data_num</a> = 255;</div><div class="line">    <span class="keywordflow">if</span>(RC_SUCCESS == <a class="code" href="_j1939_8h_ad6f901a3489250837544956c6460ae15.html#ad6f901a3489250837544956c6460ae15">J1939_TP_RX_Message</a>(&amp;_tp_msg,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baa7dea1c850a0e3f15d01b1209805b79a">Select_CAN_NODE_1</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> _i =0;</div><div class="line">        <span class="keywordflow">switch</span> (_tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#aeda15e48f0a0f49dd417552c12804dd9">PGN</a>) {</div><div class="line">        <span class="keywordflow">case</span> 4096:  </div><div class="line">            <span class="comment">/*your code*/</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><blockquote class="doxtable">
<ul>
<li>æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TP_RX_Msg( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <span class="comment">//J1939_TP_MAX_MESSAGE_LENGTHåè®®æ ˆæ”¯æŒçš„æœ€å¤§é•¿åº¦ï¼Œåœ¨J1939.hä¸­å®šä¹‰</span></div><div class="line">    <a class="code" href="_j1939_8h.html#abed4986035b5138ce5c8306d2653fe01">j1939_uint8_t</a> _data[J1939_TP_MAX_MESSAGE_LENGTH];</div><div class="line">    <a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html">TP_RX_MESSAGE</a> _tp_msg;</div><div class="line"></div><div class="line">    _tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#abe235e92fcf5e3ffba5a2f990508609d">data</a> = _data;</div><div class="line">    _tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#aaa2893f791e31950d596ccda54abf6ec">data_num</a> = 255;</div><div class="line">    <span class="keywordflow">while</span>(RC_SUCCESS == <a class="code" href="_j1939_8h_ad6f901a3489250837544956c6460ae15.html#ad6f901a3489250837544956c6460ae15">J1939_TP_RX_Message</a>(&amp;_tp_msg,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>))</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> _i =0;</div><div class="line">        <span class="keywordflow">switch</span> (_tp_msg.<a class="code" href="struct_t_p___r_x___m_e_s_s_a_g_e.html#aeda15e48f0a0f49dd417552c12804dd9">PGN</a>) {</div><div class="line">        <span class="keywordflow">case</span> 4096:  </div><div class="line">            <span class="comment">/*your code*/</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><hr/>
 <h1><a class="anchor" id="autotoc_md14"></a>
J1939_Request_PGN()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£J1939-21,16~18é¡µçš„è¯·æ±‚ä¸å“åº”</li>
<li>å‘æ€»çº¿è¯·æ±‚è·å»ä¸€ä¸ªPGNï¼ŒPGNå¯ä»¥æ˜¯å•å¸§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šå¸§çš„ã€‚ æœ¬å‡½æ•°åªå‘é€PGNè¯·æ±‚ï¼Œä¸å¤„ç†ACKå’ŒNACKç­‰å“åº”æ¶ˆæ¯ï¼Œå’Œè¢«è¯·æ±‚çš„PGNæ¶ˆæ¯ï¼Œå¯ä»¥è°ƒç”¨J1939_DequeueMessage() å’Œ <a class="el" href="_j1939_8h_ad6f901a3489250837544956c6460ae15.html#ad6f901a3489250837544956c6460ae15">J1939_TP_RX_Message()</a>è¯»å–æ•°æ®åï¼Œè‡ªè¡Œå¤„ç†æˆ–ä¸å¤„ç†ã€‚ 4.æ¯è°ƒç”¨J1939_Request_PGN()ä¸€æ¬¡ï¼Œå¯èƒ½ä¼šæ”¶åˆ°ACKå’ŒNACKç­‰æ¶ˆæ¯ï¼Œå’Œè¢«è¯·æ±‚çš„PGNæ¶ˆæ¯ã€‚æƒ…å†µç›¸å½“å¤æ‚ï¼Œè®¾è®¡å¤šå¸§ä¸å•å¸§ï¼ŒPDU1ä¸PDU2ç­‰çš„å…³ç³»ã€‚å…·ä½“æƒ…å†µ1939-21,17é¡µï¼Œè¡¨4æœ‰æè¿°ã€‚ </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="comment">/*å‘ç‰¹å®šåœ°å€è¯·æ±‚PGNï¼ŒPGNå¯ä»¥æ˜¯å¤šå¸§å’Œå•å¸§çš„*/</span></div><div class="line"><span class="comment">/*ç‚¹å¯¹ç‚¹è¯·æ±‚*/</span></div><div class="line"><span class="keywordtype">void</span> my_Request_PGN( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <span class="comment">/*è¯·æ±‚ä¸€ä¸ªPDU1æ ¼å¼çš„PGN*/</span></div><div class="line">    <a class="code" href="_j1939_8h_ade5a2ccfd9902b6d68f7970ab7dab849.html#ade5a2ccfd9902b6d68f7970ab7dab849">J1939_Request_PGN</a>(0x000100,56,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">    <span class="comment">/*è¯·æ±‚ä¸€ä¸ªPDU2æ ¼å¼çš„PGN*/</span></div><div class="line">    <a class="code" href="_j1939_8h_ade5a2ccfd9902b6d68f7970ab7dab849.html#ade5a2ccfd9902b6d68f7970ab7dab849">J1939_Request_PGN</a>(0x00F101,56,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">}</div><div class="line"><span class="comment">/*å¹¿æ’­è¯·æ±‚PGNï¼ŒPGNå¯ä»¥æ˜¯å¤šå¸§å’Œå•å¸§çš„*/</span></div><div class="line"><span class="comment">/*ç‚¹å¯¹å¤šè¯·æ±‚ï¼Œå¯èƒ½æ”¶åˆ°æ¥è‡ªä¸åŒECUæ•°æ®ï¼Œå¦‚æœå¤šä¸ªECUå¯¹åŒä¸€ä¸ªPGNæ”¯æŒ*/</span></div><div class="line"><span class="keywordtype">void</span> my_Request_PGN( <span class="keywordtype">void</span> )</div><div class="line">{</div><div class="line">    <span class="comment">/*è¯·æ±‚ä¸€ä¸ªPDU1æ ¼å¼çš„PGN*/</span></div><div class="line">    <a class="code" href="_j1939_8h_ade5a2ccfd9902b6d68f7970ab7dab849.html#ade5a2ccfd9902b6d68f7970ab7dab849">J1939_Request_PGN</a>(0x000100,J1939_GLOBAL_ADDRESS,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">    <span class="comment">/*è¯·æ±‚ä¸€ä¸ªPDU2æ ¼å¼çš„PGN*/</span></div><div class="line">    <a class="code" href="_j1939_8h_ade5a2ccfd9902b6d68f7970ab7dab849.html#ade5a2ccfd9902b6d68f7970ab7dab849">J1939_Request_PGN</a>(0x00F101,J1939_GLOBAL_ADDRESS,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">}</div></div><!-- fragment --><hr/>
<h1><a class="anchor" id="autotoc_md16"></a>
J1939_Create_Response()</h1>
<blockquote class="doxtable">
<ol type="1">
<li>è°ƒç”¨æ­¤å‡½æ•°å‰ï¼Œéœ€è¦å…ˆåˆå§‹åŒ–J1939åè®®æ ˆï¼ŒJ1939_Initialization()å’Œ <a class="el" href="_j1939_8h_adfc3c184a14f94b83a28073a15264d5c.html#adfc3c184a14f94b83a28073a15264d5c">J1939_Poll()</a>æ­£ç¡®çš„è¢«è°ƒç”¨</li>
<li>éœ€è¦äº†è§£J1939-21,16~18é¡µçš„è¯·æ±‚ä¸å“åº”</li>
<li>åŒä¸€ä¸ªPGNå“åº”ï¼Œåªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œå¤šæ¬¡è¢«åˆ›å»ºï¼Œåè®®æ ˆä¼šä»¥ç¬¬ä¸€æ¬¡ä¸ºä¸»ã€‚</li>
<li>æ³¨æ„ï¼šJ1939_Create_Responseï¼ˆï¼‰éœ€è¦ä¼ å…¥ä¸€ä¸ªæ•°æ®æŒ‡é’ˆï¼Œå’Œç›¸åº”çš„æ•°æ®æ›´æ–°å‡½æ•°ï¼Œ</li>
<li>å¦‚æœä½ ä¸éœ€è¦æ•°æ®æ›´æ–°å‡½æ•°ï¼Œä½ å¯ä»¥å¸¦å…¥å‚æ•° J1939_NULL </li>
</ol>
</blockquote>
<blockquote class="doxtable">
<ul>
<li>æœ€ä½³æ¨èè°ƒç”¨æ–¹å¼ </li>
</ul>
</blockquote>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ResponseTestData[8];</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ResponseTestTPData[17];</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*ç”¨æ¥æ›´æ–°æ•°æ®çš„å‡½æ•°ï¼Œ PGNå“åº”åŠŸèƒ½è¢«è¯·æ±‚æ¶ˆæ¯è§¦å‘æ—¶ï¼Œéƒ½ä¼šæå‰è°ƒç”¨æœ¬å‡½æ•°ï¼Œç„¶åå‘é€ ACKå’ŒNACKç­‰æ¶ˆæ¯ï¼Œå’Œè¢«è¯·æ±‚çš„PGNæ¶ˆæ¯ã€‚*/</span></div><div class="line"><span class="comment">/*æ­¤å‡½æ•°ä¸å®œå†™çš„å¤ªå¤æ‚ï¼Œæµªè´¹CPUèµ„æº*/</span></div><div class="line"><span class="keywordtype">void</span> ResponseTestUpdata()</div><div class="line">{</div><div class="line">    ResponseTestData[0] = (Voltage &amp; 0x00FF);<span class="comment">//Voltageæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç”¨ä½œè®°å½•é‡‡é›†çš„ç”µå‹</span></div><div class="line">    ResponseTestData[1] = (Voltage &gt;&gt; 8) &amp; 0x00FF;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> ResponseTest()</div><div class="line">{</div><div class="line">    <span class="comment">/*å“åº”æ˜¯å•å¸§è¿˜æ˜¯å¤šå¸§ï¼Œæ¥å£é€šè¿‡ä»£å…¥çš„æ•°æ®é•¿åº¦è¯†åˆ«ï¼ŒPDU1è¿˜æ˜¯PDU2,é€šè¿‡PGNè¯†åˆ«*/</span></div><div class="line">    <span class="comment">/*åˆ›å»ºä¸€ä¸ªå•å¸§PGNçš„å“åº”*/</span></div><div class="line">    <a class="code" href="_j1939_8h_a70a740723a7139eef9dbc3f73c327cd2.html#a70a740723a7139eef9dbc3f73c327cd2">J1939_Create_Response</a>(ResponseTestData,8,0x000200,ResponseTestUpdata,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">    <span class="comment">/*åˆ›å»ºä¸€ä¸ªå¤šå¸§PGNçš„å“åº”*/</span></div><div class="line">    <a class="code" href="_j1939_8h_a70a740723a7139eef9dbc3f73c327cd2.html#a70a740723a7139eef9dbc3f73c327cd2">J1939_Create_Response</a>(ResponseTestTPData,17,0x00FE33,J1939_NULL,<a class="code" href="_j1939_8h_afa47c62b47948afd20d3bf018a4fa67b.html#afa47c62b47948afd20d3bf018a4fa67baae1511c6e2916d45af460e1a43d18a80">Select_CAN_NODE_2</a>);</div><div class="line">}</div></div><!-- fragment --> <hr/>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">ç”Ÿæˆäº 2018å¹´ ä¸€æœˆ 24æ—¥ æ˜ŸæœŸä¸‰ 19:20:25 , ä¸º J1939Socketä½¿ç”¨ 
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
